{"ast":null,"code":"var _jsxFileName = \"/Users/rahul/Desktop/filter-select/src/components/SearchBox.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport UserCard from './UserCard';\nimport \"./global.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction SearchBox(_ref) {\n  _s();\n  let {\n    users\n  } = _ref;\n  const [searchQuery, setSearchQuery] = useState('');\n  const [matchingUsers, setMatchingUsers] = useState([]);\n  const [activeIndex, setActiveIndex] = useState(-1);\n  const [isMouseHovered, setIsMouseHovered] = useState(false);\n  const [isMousePreferred, setIsMousePreferred] = useState(false);\n  const [isKeywordPreferred, setIsKeywordPreferred] = useState(true);\n  const inputRef = useRef(null);\n  const cardContainerRef = useRef(null);\n  useEffect(() => {\n    // Function to perform search\n    const performSearch = () => {\n      const query = searchQuery.toLowerCase();\n      const matching = users.filter(user => user.id.toString().includes(query) || user.name.toLowerCase().includes(query) || user.address.toLowerCase().includes(query) || user.pincode.includes(query) || user.items.some(item => item.toLowerCase().includes(query)));\n      setMatchingUsers(matching);\n      setActiveIndex(-1);\n    };\n    performSearch();\n  }, [searchQuery, users]);\n  useEffect(() => {\n    // Scroll the active card into view\n    if (activeIndex >= 0 && cardContainerRef.current) {\n      const activeCard = cardContainerRef.current.querySelector('.active');\n      if (activeCard) {\n        activeCard.scrollIntoView({\n          behavior: 'smooth',\n          block: 'nearest'\n        });\n      }\n    }\n  }, [activeIndex]);\n  const handleInputChange = event => {\n    const {\n      value\n    } = event.target;\n    setSearchQuery(value.toLowerCase());\n    setIsKeywordPreferred(true);\n  };\n  const handleCardClick = index => {\n    setActiveIndex(index);\n    setIsKeywordPreferred(false);\n  };\n  const handleCardMouseEnter = index => {\n    if (activeIndex === -1) {\n      setActiveIndex(index);\n      setIsMouseHovered(true);\n      setIsMousePreferred(true);\n      setIsKeywordPreferred(false);\n    }\n  };\n  const handleCardMouseLeave = () => {\n    if (!isKeywordPreferred) {\n      setIsMouseHovered(false);\n      setIsMousePreferred(false);\n    }\n  };\n  const handleKeyDown = event => {\n    const {\n      keyCode\n    } = event;\n    // if (keyCode === 38 && activeIndex > 0) {\n    //   // Up arrow key\n    //   setActiveIndex(activeIndex - 1);\n    // } else if (keyCode === 40 && activeIndex < matchingUsers.length - 1) {\n    //   // Down arrow key\n    //   setActiveIndex(activeIndex + 1);\n    // }\n    if (event.key === 'ArrowUp') {\n      event.preventDefault();\n      setActiveIndex(prevActiveIndex => prevActiveIndex !== null ? Math.max(prevActiveIndex - 1, 0) : null);\n      setIsMousePreferred(false);\n      setIsKeywordPreferred(true);\n    } else if (event.key === 'ArrowDown') {\n      event.preventDefault();\n      setActiveIndex(prevActiveIndex => prevActiveIndex !== null ? Math.min(prevActiveIndex + 1, matchingUsers.length - 1) : 0);\n      setIsMousePreferred(false);\n      setIsKeywordPreferred(true);\n    }\n  };\n  useEffect(() => {\n    inputRef.current.focus();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n      className: \"search-input\",\n      type: \"text\",\n      value: searchQuery,\n      onChange: handleInputChange,\n      onKeyDown: handleKeyDown,\n      placeholder: \"Search users by ID, address, name, pin...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 15\n    }, this), searchQuery && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card-container\",\n      ref: cardContainerRef,\n      children: matchingUsers.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"user-card empty\",\n        children: \"No results found\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 23\n      }, this) : matchingUsers.map((user, index) => /*#__PURE__*/_jsxDEV(UserCard, {\n        user: user,\n        isActive: index === activeIndex,\n        onClick: () => handleCardClick(index),\n        onMouseEnter: () => handleCardMouseEnter(index),\n        searchQuery: searchQuery\n      }, user.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 23\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 19\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 102,\n    columnNumber: 13\n  }, this);\n}\n_s(SearchBox, \"B1+5riShJ2V5wySAHlyE+25WUyo=\");\n_c = SearchBox;\n;\nexport default SearchBox;\nvar _c;\n$RefreshReg$(_c, \"SearchBox\");","map":{"version":3,"names":["React","useState","useEffect","useRef","UserCard","jsxDEV","_jsxDEV","SearchBox","_ref","_s","users","searchQuery","setSearchQuery","matchingUsers","setMatchingUsers","activeIndex","setActiveIndex","isMouseHovered","setIsMouseHovered","isMousePreferred","setIsMousePreferred","isKeywordPreferred","setIsKeywordPreferred","inputRef","cardContainerRef","performSearch","query","toLowerCase","matching","filter","user","id","toString","includes","name","address","pincode","items","some","item","current","activeCard","querySelector","scrollIntoView","behavior","block","handleInputChange","event","value","target","handleCardClick","index","handleCardMouseEnter","handleCardMouseLeave","handleKeyDown","keyCode","key","preventDefault","prevActiveIndex","Math","max","min","length","focus","className","children","type","onChange","onKeyDown","placeholder","fileName","_jsxFileName","lineNumber","columnNumber","ref","map","isActive","onClick","onMouseEnter","_c","$RefreshReg$"],"sources":["/Users/rahul/Desktop/filter-select/src/components/SearchBox.js"],"sourcesContent":["import React, { useState,useEffect,useRef} from 'react'\nimport UserCard from './UserCard';\nimport \"./global.css\";\n\n\nfunction SearchBox({users}) {\n        const [searchQuery, setSearchQuery] = useState('');\n        const [matchingUsers, setMatchingUsers] = useState([]);\n        const [activeIndex, setActiveIndex] = useState(-1);\n        const [isMouseHovered, setIsMouseHovered] = useState(false);\n        const [isMousePreferred, setIsMousePreferred] = useState(false);\n        const [isKeywordPreferred, setIsKeywordPreferred] = useState(true);\n        const inputRef = useRef(null);\n        const cardContainerRef = useRef(null);\n      \n        useEffect(() => {\n          // Function to perform search\n          const performSearch = () => {\n            const query = searchQuery.toLowerCase();\n            const matching = users.filter(\n              (user) =>\n                user.id.toString().includes(query) ||\n                user.name.toLowerCase().includes(query) ||\n                user.address.toLowerCase().includes(query) ||\n                user.pincode.includes(query) ||\n                user.items.some((item) => item.toLowerCase().includes(query))\n            );\n            setMatchingUsers(matching);\n            setActiveIndex(-1);\n          };\n      \n          performSearch();\n        }, [searchQuery, users]);\n      \n        useEffect(() => {\n          // Scroll the active card into view\n          if (activeIndex >= 0 && cardContainerRef.current) {\n            const activeCard = cardContainerRef.current.querySelector('.active');\n            if (activeCard) {\n              activeCard.scrollIntoView({ behavior: 'smooth', block: 'nearest' });\n            }\n          }\n        }, [activeIndex]);\n      \n        const handleInputChange = (event) => {\n          const { value } = event.target;\n          setSearchQuery(value.toLowerCase());\n          setIsKeywordPreferred(true);\n        };\n      \n        const handleCardClick = (index) => {\n          setActiveIndex(index);\n          setIsKeywordPreferred(false);\n\n        };\n      \n        const handleCardMouseEnter = (index) => {\n          if (activeIndex === -1) {\n            setActiveIndex(index);\n            setIsMouseHovered(true);\n            setIsMousePreferred(true);\n            setIsKeywordPreferred(false);\n          }\n        };\n      \n        const handleCardMouseLeave = () => {\n          if (!isKeywordPreferred) {\n            setIsMouseHovered(false);\n            setIsMousePreferred(false);\n          }\n        };\n\n        const handleKeyDown = (event) => {\n          const { keyCode } = event;\n          // if (keyCode === 38 && activeIndex > 0) {\n          //   // Up arrow key\n          //   setActiveIndex(activeIndex - 1);\n          // } else if (keyCode === 40 && activeIndex < matchingUsers.length - 1) {\n          //   // Down arrow key\n          //   setActiveIndex(activeIndex + 1);\n          // }\n          if (event.key === 'ArrowUp') {\n            event.preventDefault();\n            setActiveIndex((prevActiveIndex) => (prevActiveIndex !== null ? Math.max(prevActiveIndex - 1, 0) : null));\n            setIsMousePreferred(false);\n            setIsKeywordPreferred(true);\n          } else if (event.key === 'ArrowDown') {\n            event.preventDefault();\n            setActiveIndex((prevActiveIndex) =>\n              prevActiveIndex !== null ? Math.min(prevActiveIndex + 1, matchingUsers.length - 1) : 0\n            );\n            setIsMousePreferred(false);\n            setIsKeywordPreferred(true);\n          }\n        };\n\n        useEffect(() => {\n          inputRef.current.focus();\n        }, []);\n\n        return(\n            <div className='container'>\n              <input \n                  className='search-input' \n                  type=\"text\" \n                  value={searchQuery} \n                  onChange={handleInputChange} \n                  onKeyDown={handleKeyDown} \n                  placeholder='Search users by ID, address, name, pin...'\n              />\n              {searchQuery && (\n                  <div className=\"card-container\" ref={cardContainerRef}>\n                  {matchingUsers.length === 0 ? (\n                      <div className=\"user-card empty\">No results found</div>\n                  ) : (\n                      matchingUsers.map((user, index) => (\n                      <UserCard\n                          key={user.id}\n                          user={user}\n                          isActive={index === activeIndex}\n                          onClick={() => handleCardClick(index)}\n                          onMouseEnter={() => handleCardMouseEnter(index)}\n                          searchQuery={searchQuery}\n                      />\n                      ))\n                  )}\n                  </div>\n            )}\n          </div>\n        )};\n\nexport default SearchBox;"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAACC,SAAS,EAACC,MAAM,QAAO,OAAO;AACvD,OAAOC,QAAQ,MAAM,YAAY;AACjC,OAAO,cAAc;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAGtB,SAASC,SAASA,CAAAC,IAAA,EAAU;EAAAC,EAAA;EAAA,IAAT;IAACC;EAAK,CAAC,GAAAF,IAAA;EAClB,MAAM,CAACG,WAAW,EAAEC,cAAc,CAAC,GAAGX,QAAQ,CAAC,EAAE,CAAC;EAClD,MAAM,CAACY,aAAa,EAAEC,gBAAgB,CAAC,GAAGb,QAAQ,CAAC,EAAE,CAAC;EACtD,MAAM,CAACc,WAAW,EAAEC,cAAc,CAAC,GAAGf,QAAQ,CAAC,CAAC,CAAC,CAAC;EAClD,MAAM,CAACgB,cAAc,EAAEC,iBAAiB,CAAC,GAAGjB,QAAQ,CAAC,KAAK,CAAC;EAC3D,MAAM,CAACkB,gBAAgB,EAAEC,mBAAmB,CAAC,GAAGnB,QAAQ,CAAC,KAAK,CAAC;EAC/D,MAAM,CAACoB,kBAAkB,EAAEC,qBAAqB,CAAC,GAAGrB,QAAQ,CAAC,IAAI,CAAC;EAClE,MAAMsB,QAAQ,GAAGpB,MAAM,CAAC,IAAI,CAAC;EAC7B,MAAMqB,gBAAgB,GAAGrB,MAAM,CAAC,IAAI,CAAC;EAErCD,SAAS,CAAC,MAAM;IACd;IACA,MAAMuB,aAAa,GAAGA,CAAA,KAAM;MAC1B,MAAMC,KAAK,GAAGf,WAAW,CAACgB,WAAW,CAAC,CAAC;MACvC,MAAMC,QAAQ,GAAGlB,KAAK,CAACmB,MAAM,CAC1BC,IAAI,IACHA,IAAI,CAACC,EAAE,CAACC,QAAQ,CAAC,CAAC,CAACC,QAAQ,CAACP,KAAK,CAAC,IAClCI,IAAI,CAACI,IAAI,CAACP,WAAW,CAAC,CAAC,CAACM,QAAQ,CAACP,KAAK,CAAC,IACvCI,IAAI,CAACK,OAAO,CAACR,WAAW,CAAC,CAAC,CAACM,QAAQ,CAACP,KAAK,CAAC,IAC1CI,IAAI,CAACM,OAAO,CAACH,QAAQ,CAACP,KAAK,CAAC,IAC5BI,IAAI,CAACO,KAAK,CAACC,IAAI,CAAEC,IAAI,IAAKA,IAAI,CAACZ,WAAW,CAAC,CAAC,CAACM,QAAQ,CAACP,KAAK,CAAC,CAChE,CAAC;MACDZ,gBAAgB,CAACc,QAAQ,CAAC;MAC1BZ,cAAc,CAAC,CAAC,CAAC,CAAC;IACpB,CAAC;IAEDS,aAAa,CAAC,CAAC;EACjB,CAAC,EAAE,CAACd,WAAW,EAAED,KAAK,CAAC,CAAC;EAExBR,SAAS,CAAC,MAAM;IACd;IACA,IAAIa,WAAW,IAAI,CAAC,IAAIS,gBAAgB,CAACgB,OAAO,EAAE;MAChD,MAAMC,UAAU,GAAGjB,gBAAgB,CAACgB,OAAO,CAACE,aAAa,CAAC,SAAS,CAAC;MACpE,IAAID,UAAU,EAAE;QACdA,UAAU,CAACE,cAAc,CAAC;UAAEC,QAAQ,EAAE,QAAQ;UAAEC,KAAK,EAAE;QAAU,CAAC,CAAC;MACrE;IACF;EACF,CAAC,EAAE,CAAC9B,WAAW,CAAC,CAAC;EAEjB,MAAM+B,iBAAiB,GAAIC,KAAK,IAAK;IACnC,MAAM;MAAEC;IAAM,CAAC,GAAGD,KAAK,CAACE,MAAM;IAC9BrC,cAAc,CAACoC,KAAK,CAACrB,WAAW,CAAC,CAAC,CAAC;IACnCL,qBAAqB,CAAC,IAAI,CAAC;EAC7B,CAAC;EAED,MAAM4B,eAAe,GAAIC,KAAK,IAAK;IACjCnC,cAAc,CAACmC,KAAK,CAAC;IACrB7B,qBAAqB,CAAC,KAAK,CAAC;EAE9B,CAAC;EAED,MAAM8B,oBAAoB,GAAID,KAAK,IAAK;IACtC,IAAIpC,WAAW,KAAK,CAAC,CAAC,EAAE;MACtBC,cAAc,CAACmC,KAAK,CAAC;MACrBjC,iBAAiB,CAAC,IAAI,CAAC;MACvBE,mBAAmB,CAAC,IAAI,CAAC;MACzBE,qBAAqB,CAAC,KAAK,CAAC;IAC9B;EACF,CAAC;EAED,MAAM+B,oBAAoB,GAAGA,CAAA,KAAM;IACjC,IAAI,CAAChC,kBAAkB,EAAE;MACvBH,iBAAiB,CAAC,KAAK,CAAC;MACxBE,mBAAmB,CAAC,KAAK,CAAC;IAC5B;EACF,CAAC;EAED,MAAMkC,aAAa,GAAIP,KAAK,IAAK;IAC/B,MAAM;MAAEQ;IAAQ,CAAC,GAAGR,KAAK;IACzB;IACA;IACA;IACA;IACA;IACA;IACA;IACA,IAAIA,KAAK,CAACS,GAAG,KAAK,SAAS,EAAE;MAC3BT,KAAK,CAACU,cAAc,CAAC,CAAC;MACtBzC,cAAc,CAAE0C,eAAe,IAAMA,eAAe,KAAK,IAAI,GAAGC,IAAI,CAACC,GAAG,CAACF,eAAe,GAAG,CAAC,EAAE,CAAC,CAAC,GAAG,IAAK,CAAC;MACzGtC,mBAAmB,CAAC,KAAK,CAAC;MAC1BE,qBAAqB,CAAC,IAAI,CAAC;IAC7B,CAAC,MAAM,IAAIyB,KAAK,CAACS,GAAG,KAAK,WAAW,EAAE;MACpCT,KAAK,CAACU,cAAc,CAAC,CAAC;MACtBzC,cAAc,CAAE0C,eAAe,IAC7BA,eAAe,KAAK,IAAI,GAAGC,IAAI,CAACE,GAAG,CAACH,eAAe,GAAG,CAAC,EAAE7C,aAAa,CAACiD,MAAM,GAAG,CAAC,CAAC,GAAG,CACvF,CAAC;MACD1C,mBAAmB,CAAC,KAAK,CAAC;MAC1BE,qBAAqB,CAAC,IAAI,CAAC;IAC7B;EACF,CAAC;EAEDpB,SAAS,CAAC,MAAM;IACdqB,QAAQ,CAACiB,OAAO,CAACuB,KAAK,CAAC,CAAC;EAC1B,CAAC,EAAE,EAAE,CAAC;EAEN,oBACIzD,OAAA;IAAK0D,SAAS,EAAC,WAAW;IAAAC,QAAA,gBACxB3D,OAAA;MACI0D,SAAS,EAAC,cAAc;MACxBE,IAAI,EAAC,MAAM;MACXlB,KAAK,EAAErC,WAAY;MACnBwD,QAAQ,EAAErB,iBAAkB;MAC5BsB,SAAS,EAAEd,aAAc;MACzBe,WAAW,EAAC;IAA2C;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAC1D,CAAC,EACD9D,WAAW,iBACRL,OAAA;MAAK0D,SAAS,EAAC,gBAAgB;MAACU,GAAG,EAAElD,gBAAiB;MAAAyC,QAAA,EACrDpD,aAAa,CAACiD,MAAM,KAAK,CAAC,gBACvBxD,OAAA;QAAK0D,SAAS,EAAC,iBAAiB;QAAAC,QAAA,EAAC;MAAgB;QAAAK,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAK,CAAC,GAEvD5D,aAAa,CAAC8D,GAAG,CAAC,CAAC7C,IAAI,EAAEqB,KAAK,kBAC9B7C,OAAA,CAACF,QAAQ;QAEL0B,IAAI,EAAEA,IAAK;QACX8C,QAAQ,EAAEzB,KAAK,KAAKpC,WAAY;QAChC8D,OAAO,EAAEA,CAAA,KAAM3B,eAAe,CAACC,KAAK,CAAE;QACtC2B,YAAY,EAAEA,CAAA,KAAM1B,oBAAoB,CAACD,KAAK,CAAE;QAChDxC,WAAW,EAAEA;MAAY,GALpBmB,IAAI,CAACC,EAAE;QAAAuC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAMf,CACA;IACJ;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACI,CACV;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACE,CAAC;AACP;AAAChE,EAAA,CA5HDF,SAAS;AAAAwE,EAAA,GAATxE,SAAS;AA4HR;AAEV,eAAeA,SAAS;AAAC,IAAAwE,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}