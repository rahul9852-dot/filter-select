{"ast":null,"code":"var _jsxFileName = \"/Users/rahul/Desktop/filter-select/src/components/SearchBox.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport UserCard from './UserCard';\nimport \"./global.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction SearchBox(_ref) {\n  _s();\n  let {\n    users\n  } = _ref;\n  const [searchQuery, setSearchQuery] = useState('');\n  const [matchingUsers, setMatchingUsers] = useState([]);\n  const [activeIndex, setActiveIndex] = useState(-1);\n  const [isMousePreferred, setIsMousePreferred] = useState(false);\n  const [isKeywordPreferred, setIsKeywordPreferred] = useState(true);\n  const inputRef = useRef(null);\n  const cardContainerRef = useRef(null);\n  useEffect(() => {\n    // Function to perform search\n    const performSearch = () => {\n      const query = searchQuery.toLowerCase();\n      const matching = users.filter(user => user.id.toString().includes(query) || user.name.toLowerCase().includes(query) || user.address.toLowerCase().includes(query) || user.pincode.includes(query) || user.items.some(item => item.toLowerCase().includes(query)));\n      setMatchingUsers(matching);\n      setActiveIndex(-1);\n    };\n    performSearch();\n  }, [searchQuery, users]);\n  useEffect(() => {\n    // Scroll the active card into view\n    if (activeIndex >= 0 && cardContainerRef.current) {\n      const activeCard = cardContainerRef.current.querySelector('.active');\n      if (activeCard) {\n        activeCard.scrollIntoView({\n          behavior: 'smooth',\n          block: 'nearest'\n        });\n      }\n    }\n  }, [activeIndex]);\n  const handleInputChange = event => {\n    const {\n      value\n    } = event.target;\n    setSearchQuery(value.toLowerCase());\n    setIsKeywordPreferred(true);\n  };\n  const handleCardClick = index => {\n    setActiveIndex(index);\n    setIsKeywordPreferred(false);\n  };\n  const handleCardMouseEnter = index => {\n    setActiveIndex(index);\n    setIsMousePreferred(true);\n    setIsKeywordPreferred(false);\n  };\n  const handleCardMouseLeave = () => {\n    if (!isKeywordPreferred) {\n      setIsMousePreferred(false);\n    }\n  };\n  const handleKeyDown = event => {\n    // const { keyCode } = event;\n    // if (keyCode === 38 && activeIndex > 0) {\n    //   // Up arrow key\n    //   setActiveIndex(activeIndex - 1);\n    // } else if (keyCode === 40 && activeIndex < matchingUsers.length - 1) {\n    //   // Down arrow key\n    //   setActiveIndex(activeIndex + 1);\n    // }\n    if (event.key === 'ArrowUp') {\n      event.preventDefault();\n      setActiveIndex(prevActiveIndex => prevActiveIndex !== null ? Math.max(prevActiveIndex - 1, 0) : null);\n      setIsMousePreferred(false);\n      setIsKeywordPreferred(true);\n    } else if (event.key === 'ArrowDown') {\n      event.preventDefault();\n      setActiveIndex(prevActiveIndex => prevActiveIndex !== null ? Math.min(prevActiveIndex + 1, matchingUsers.length - 1) : 0);\n      setIsMousePreferred(false);\n      setIsKeywordPreferred(true);\n    }\n  };\n  useEffect(() => {\n    inputRef.current.focus();\n  }, []);\n\n  // console.log(isKeywordPreferred, isMousePreferred)\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n      className: \"search-input\",\n      type: \"text\",\n      value: searchQuery,\n      onChange: handleInputChange,\n      onKeyDown: handleKeyDown,\n      placeholder: \"Search users by ID, address, name, pin...\",\n      ref: inputRef\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 15\n    }, this), searchQuery && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card-container\",\n      ref: cardContainerRef,\n      children: matchingUsers.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"user-card empty\",\n        children: \"No results found\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 23\n      }, this) : matchingUsers.map((user, index) => /*#__PURE__*/_jsxDEV(UserCard, {\n        user: user,\n        isActive: isKeywordPreferred ? index === activeIndex : isMousePreferred && index === activeIndex,\n        onClick: () => handleCardClick(index),\n        onMouseLeave: handleCardMouseLeave,\n        onMouseEnter: () => handleCardMouseEnter(index),\n        searchQuery: searchQuery\n      }, index, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 23\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 19\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 99,\n    columnNumber: 13\n  }, this);\n}\n_s(SearchBox, \"5zU4CnwlGwuArAYP5gNhiW/gDHw=\");\n_c = SearchBox;\n;\nexport default SearchBox;\nvar _c;\n$RefreshReg$(_c, \"SearchBox\");","map":{"version":3,"names":["React","useState","useEffect","useRef","UserCard","jsxDEV","_jsxDEV","SearchBox","_ref","_s","users","searchQuery","setSearchQuery","matchingUsers","setMatchingUsers","activeIndex","setActiveIndex","isMousePreferred","setIsMousePreferred","isKeywordPreferred","setIsKeywordPreferred","inputRef","cardContainerRef","performSearch","query","toLowerCase","matching","filter","user","id","toString","includes","name","address","pincode","items","some","item","current","activeCard","querySelector","scrollIntoView","behavior","block","handleInputChange","event","value","target","handleCardClick","index","handleCardMouseEnter","handleCardMouseLeave","handleKeyDown","key","preventDefault","prevActiveIndex","Math","max","min","length","focus","className","children","type","onChange","onKeyDown","placeholder","ref","fileName","_jsxFileName","lineNumber","columnNumber","map","isActive","onClick","onMouseLeave","onMouseEnter","_c","$RefreshReg$"],"sources":["/Users/rahul/Desktop/filter-select/src/components/SearchBox.js"],"sourcesContent":["import React, { useState,useEffect,useRef} from 'react'\nimport UserCard from './UserCard';\nimport \"./global.css\";\n\n\nfunction SearchBox({users}) {\n        const [searchQuery, setSearchQuery] = useState('');\n        const [matchingUsers, setMatchingUsers] = useState([]);\n        const [activeIndex, setActiveIndex] = useState(-1);\n        const [isMousePreferred, setIsMousePreferred] = useState(false);\n        const [isKeywordPreferred, setIsKeywordPreferred] = useState(true);\n        const inputRef = useRef(null);\n        const cardContainerRef = useRef(null);\n      \n        useEffect(() => {\n          // Function to perform search\n          const performSearch = () => {\n            const query = searchQuery.toLowerCase();\n            const matching = users.filter(\n              (user) =>\n                user.id.toString().includes(query) ||\n                user.name.toLowerCase().includes(query) ||\n                user.address.toLowerCase().includes(query) ||\n                user.pincode.includes(query) ||\n                user.items.some((item) => item.toLowerCase().includes(query))\n            );\n            setMatchingUsers(matching);\n            setActiveIndex(-1);\n          };\n      \n          performSearch();\n        }, [searchQuery, users]);\n      \n        useEffect(() => {\n          // Scroll the active card into view\n          if (activeIndex >= 0 && cardContainerRef.current) {\n            const activeCard = cardContainerRef.current.querySelector('.active');\n            if (activeCard) {\n              activeCard.scrollIntoView({ behavior: 'smooth', block: 'nearest' });\n            }\n          }\n        }, [activeIndex]);\n      \n        const handleInputChange = (event) => {\n          const { value } = event.target;\n          setSearchQuery(value.toLowerCase());\n          setIsKeywordPreferred(true);\n        };\n      \n        const handleCardClick = (index) => {\n          setActiveIndex(index);\n          setIsKeywordPreferred(false);\n\n        };\n      \n        const handleCardMouseEnter = (index) => {\n            setActiveIndex(index);\n            setIsMousePreferred(true);\n            setIsKeywordPreferred(false);\n        };\n      \n        const handleCardMouseLeave = () => {\n          if (!isKeywordPreferred) {\n            setIsMousePreferred(false);\n          }\n        };\n\n        const handleKeyDown = (event) => {\n          // const { keyCode } = event;\n          // if (keyCode === 38 && activeIndex > 0) {\n          //   // Up arrow key\n          //   setActiveIndex(activeIndex - 1);\n          // } else if (keyCode === 40 && activeIndex < matchingUsers.length - 1) {\n          //   // Down arrow key\n          //   setActiveIndex(activeIndex + 1);\n          // }\n          if (event.key === 'ArrowUp') {\n            event.preventDefault();\n            setActiveIndex((prevActiveIndex) => (prevActiveIndex !== null ? Math.max(prevActiveIndex - 1, 0) : null));\n            setIsMousePreferred(false);\n            setIsKeywordPreferred(true);\n          } else if (event.key === 'ArrowDown') {\n            event.preventDefault();\n            setActiveIndex((prevActiveIndex) =>\n              prevActiveIndex !== null ? Math.min(prevActiveIndex + 1, matchingUsers.length - 1) : 0\n            );\n            setIsMousePreferred(false);\n            setIsKeywordPreferred(true);\n          }\n        };\n\n        useEffect(() => {\n          inputRef.current.focus();\n        }, []);\n\n        // console.log(isKeywordPreferred, isMousePreferred)\n        return(\n        \n            <div className='container'>\n              <input \n                  className='search-input' \n                  type=\"text\" \n                  value={searchQuery} \n                  onChange={handleInputChange} \n                  onKeyDown={handleKeyDown} \n                  placeholder='Search users by ID, address, name, pin...'\n                  ref={inputRef}\n              />\n              {searchQuery && (\n                  <div className=\"card-container\" ref={cardContainerRef}>\n                  {matchingUsers.length === 0 ? (\n                      <div className=\"user-card empty\">No results found</div>\n                  ) : (\n                      matchingUsers.map((user, index) => (\n                      <UserCard\n                          key={index}\n                          user={user}\n                          isActive={isKeywordPreferred ? index === activeIndex : isMousePreferred && index === activeIndex}\n                          onClick={() => handleCardClick(index)}\n                          onMouseLeave={handleCardMouseLeave}\n                          onMouseEnter={() => handleCardMouseEnter(index)}\n                          searchQuery={searchQuery}\n                      />\n                      ))\n                  )}\n                  </div>\n            )}\n          </div>\n        )};\n\nexport default SearchBox;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}